<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/fonts.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/main.css">
    <style>
        .search{
            position: relative;
            z-index: 4;
        }

        .frame_items{
            position: relative;
            max-height: 47rem;
            overflow-y: scroll;
            padding-left: 1rem;
            padding-right: 1rem;
            /*padding-top: 1.8rem;*/
            margin-top: 1.8rem;
            background: #211d1c;
        }

        .search__item{
            margin-top: 2rem;
            padding-top: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
        }

        .search__item--poster{
            float: left;
            clear: both;
            max-width: 8.4rem;
            min-width: 8.4rem;
        }

        .search__item--info{
            margin: 0 2.4rem;
        }

        .search__item--left{
            max-width: calc(100% - 100px);
            margin-left: auto;
        }

        .btn{
            height: 4.4rem;
            width: 4.4rem;
        }

    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header__inner">
                <nav class="header__nav">
                    <a class="header__nav-link active" href="/test">Главная</a>
                    <a class="header__nav-link" href="/test/catalog">Каталог</a>
                    <a class="header__nav-link header__logo" href="/test">
                        <img src="../img/logo_og.png" alt="Logo">
                    </a>
                    <a class="header__nav-link" href="/test">Мои списки</a>
                    <a class="header__nav-link" href="/test">Мой кабинет</a>
                </nav>
            </div>
        </div>
    </header>
    <div class="search">
        <div class="container">
            <div class="search__inner">
                <div class="search__input-box">
                    <span class="input-left-icon">
                      <img src="../img/icons/search.svg" alt="">
                    </span>
                    <input id="input" autocomplete="off" class="search__input" maxlength="100" type="text" placeholder="Введите название или ключевое слово">
                    <div class="frame_items">
                        <!-- item -->
<!--                        <div class="search__item">-->
<!--                            <div class="search__item">-->
<!--                                <div class="search__item&#45;&#45;poster">-->
<!--                                    <img alt="Выходные!" title="Выходные!" src="https://api.og.movie/storage/movie_posters/media/67472/poster_rtt_23852_ru.jpg">-->
<!--                                </div>-->
<!--                                <div class="search__item&#45;&#45;left">-->
<!--                                    <div class="search__item&#45;&#45;info">-->
<!--                                        <h5>Выходные!</h5>-->
<!--                                        <div class="tags item__tags" gap="16">-->
<!--                                            <div class="tag">2009</div>-->
<!--                                            <div class="tag">IMDb 4.9</div>-->
<!--                                        </div>-->
<!--                                        <div class="hover_preview__categories">-->
<!--                                            <div class="hover_preview__category">Приключения</div>-->
<!--                                            <div class="hover_preview__category">Комедия</div>-->
<!--                                            <div class="hover_preview__category">Мелодрама</div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="search__item&#45;&#45;btns">-->
<!--                                        <button class="btn">-->
<!--                                            <span class="nuxt-icon nuxt-icon&#45;&#45;fill button-square__icon">-->
<!--                                                <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                                    <path d="M15.6929 10.5498L1.07185 19.8893C0.967986 19.9555 0.847316 19.9935 0.722695 19.9992C0.598075 20.005 0.474171 19.9782 0.36418 19.9218C0.25419 19.8653 0.162231 19.7814 0.0980994 19.6788C0.0339676 19.5763 6.44497e-05 19.459 0 19.3395V0.660533C6.44497e-05 0.540991 0.0339676 0.423705 0.0980994 0.321165C0.162231 0.218626 0.25419 0.134673 0.36418 0.0782491C0.474171 0.0218253 0.598075 -0.00495703 0.722695 0.000755024C0.847316 0.00646708 0.967986 0.0444598 1.07185 0.110686L15.6929 9.45015C15.7874 9.51051 15.8648 9.59227 15.9184 9.68819C15.972 9.78411 16 9.89121 16 10C16 10.1088 15.972 10.2159 15.9184 10.3118C15.8648 10.4077 15.7874 10.4895 15.6929 10.5498V10.5498Z"-->
<!--                                                          fill="black">-->
<!--                                            </span>-->
<!--                                        </button>-->
<!--                                        <button class="btn transparent_white">-->
<!--                                            <span class="nuxt-icon nuxt-icon&#45;&#45;fill button-square__icon">-->
<!--                                                <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--                                                    <path fill-rule="evenodd" clip-rule="evenodd"-->
<!--                                                          d="M9.0012 2.08845C11.1054 -0.53572 14.6045 -0.367386 16.427 1.20678C18.3629 2.87761 18.4962 6.21845 16.567 9.55595C15.292 11.9109 12.0395 14.2876 9.31287 15.8576C9.12037 15.9684 8.88203 15.9684 8.68953 15.8576C5.96453 14.2884 2.71453 11.9143 1.4412 9.56595C-0.4938 6.22178 -0.3613 2.87845 1.57537 1.20678C3.39787 -0.367386 6.89703 -0.53572 9.0012 2.08845ZM8.46037 3.50761C6.9412 0.883447 3.9112 0.840113 2.39203 2.15261C1.6462 2.79678 1.29287 3.77178 1.29287 4.89928C1.29287 6.13095 1.70953 7.53511 2.52453 8.94178C2.52787 8.94761 2.53037 8.95261 2.5337 8.95845C3.6687 11.0584 6.53203 13.1384 9.0012 14.5926C11.4704 13.1384 14.3337 11.0584 15.4687 8.95845C15.472 8.95261 15.4745 8.94761 15.4779 8.94178C16.2929 7.53511 16.7095 6.13095 16.7095 4.89928C16.7095 3.77178 16.3562 2.79678 15.6104 2.15261C14.0912 0.840113 11.0612 0.883447 9.54203 3.50761C9.43037 3.70095 9.22453 3.82011 9.0012 3.82011C8.77787 3.82011 8.57203 3.70095 8.46037 3.50761Z"-->
<!--                                                          fill="white">-->
<!--                                                    </path>-->
<!--                                                </svg>-->
<!--                                            </span>-->
<!--                                        </button>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
                        <!-- item -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="film-content">
        <div class="container">
            <div class="film-content__inner">
                <h1>Каталог</h1>
            </div>
        </div>
    </div>
    <footer class="footer">
        <div class="container">
            <div class="footer__inner">
                <div class="footer__top">
                    <div class="footer__left">
                        <div class="footer_logo">
                            <img src="../img/footer_logo.png" width="422" height="248" alt="OG Movie">
                        </div>
                        <div class="footer__left-content">Почувствуйте магию фильмов в формате HD - OG.MOVIE, ваш билет к качественному онлайн-просмотру!</div>
                    </div>
                    <div class="footer__right">
                        <div class="footer__right-item">
                            <h4 class="footer__right-title">Меню</h4>
                            <h3 class="footer__right-subtitle">
                                <a aria-current="page" href="/test" class="router-link-active router-link-exact-active">Главная</a>
                            </h3>
                            <div>
                                <h3 class="footer__right-subtitle">
                                    <a href="/test/search">Каталог</a>
                                </h3>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/film">Фильмы</a>
                                </div>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/series">Сериалы</a>
                                </div>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/tv-show">Телешоу</a>
                                </div>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/cartoon">Мультфильмы</a>
                                </div>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/cartoon-series">Мультсериалы</a>
                                </div>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/anime-film">Аниме</a>
                                </div>
                                <div class="footer__right-subtitle--subitems">
                                    <a href="/catalog/anime-series">Аниме-сериалы</a>
                                </div>
                            </div>
                            <!---->
                            <h3 class="footer__right-subtitle">
                                <a>Мои списки</a>
                            </h3>
                            <!---->
                            <h3 class="footer__right-subtitle">
                                <a href="/test/search" class="router-link-active router-link-exact-active">Поиск</a>
                            </h3>
                        </div>
                        <div class="footer__right-item">
                            <h4 class="footer__right-title">Мой аккаунт</h4>
                            <h3 class="footer__right-subtitle">
                                <a aria-current="page" href="/" class="router-link-active router-link-exact-active">Язык</a>
                            </h3>
                            <!---->
                            <h3 class="footer__right-subtitle">
                                <a>Поддержка</a>
                            </h3>
                            <!---->
                            <h3 class="footer__right-subtitle">FAQ</h3>
                        </div>
                    </div>
                </div>
                <div class="footer__bottom">
                    <div class="footer__bottom-left"> © 2024 OG.Movie Все права защищены</div>
                    <ul class="footer__bottom-right">
                        <li>
                            <a href="/advertisers" class="footer__bottom-link">Рекламодателям</a>
                        </li>
                        <li>
                            <a href="/right-holders" class="footer__bottom-link">Правообладателям</a>
                        </li>
                        <li>
                            <a href="/policy" class="footer__bottom-link">Политика конфиденциальности</a>
                        </li>
                    </ul>
                </div>

            </div>
        </div>
    </footer>

    <script src="../js/jquery.js"></script>
    <script>
        $(document).ready(function () {
            var timerSearch = 0;
            var originApiUrl = 'https://api.og.movie/api/v1.0/';
            var ajaxRouteUrl = "common/movies/search?query=";
            var searchUrl = originApiUrl + ajaxRouteUrl;

            $('#input').on('keyup', {search_url : searchUrl } , searchResult);

            function searchResult(event){
                var searchValue = $(event.target).val();
                var searchUrl = event.data.search_url;
                if(searchValue && searchUrl){
                    clearTimeout(timerSearch);
                    timerSearch = setTimeout(function () {
                        getAjaxData(searchUrl + searchValue);
                    }, 1000 || 0);
                }
            }

            function getAjaxData(ajaxUrl){
                if(ajaxUrl){
                    $.ajax({
                        type: "GET",
                        dataType: "json",
                        url: ajaxUrl,
                        success: function (response) {
                            parseAjaxMovieResponse(response);
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            console.log(textStatus);
                        }

                    });
                }
            }

            function parseAjaxMovieResponse(response){
                if(response.data.movies) {
                    let responseData = '';
                    response.data.movies.forEach(function(movie){
                        console.log(movie);
                        responseData = responseData + '<div class="search__item">\n' +
                            '                                <div class="search__item--poster">\n' +
                            '                                    <img alt="' + movie.name + '" title="'+ movie.name  +'" src="' + movie.poster  + '">\n' +
                            '                                </div>\n' +
                            '                                <div class="search__item--left">\n' +
                            '                                    <div class="search__item--info">\n' +
                            '                                        <h5>' + movie.name + '</h5>\n' +
                            '                                        <div class="tags item__tags" gap="16">\n' +
                            '                                            <div class="tag">' + movie.release_date + '</div>\n' +
                            '                                            <div class="tag">IMDb ' + movie.imdb_rate + '</div>\n' +
                            '                                        </div>\n' +
                            '                                        <div class="hover_preview__categories">\n' +
                            '                                            <div class="hover_preview__category">'+ movie.genres[0].name  +'</div>\n' +
                            '                                            <div class="hover_preview__category">'+ //movie.genders[1].name  +'</div>\n' +
                            '                                            <div class="hover_preview__category">'+ //movie.genders[2].name  +'</div>\n' +
                            '                                        </div>\n' +
                            '                                    </div>\n' +
                            '                                    <div class="search__item--btns">\n' +
                            '                                        <a target="_blank" href="https://og.movie/catalog/series/'+ movie.slug +'" class="btn">\n' +
                            '                                            <span class="nuxt-icon nuxt-icon--fill button-square__icon">\n' +
                            '                                                <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n' +
                            '                                                    <path d="M15.6929 10.5498L1.07185 19.8893C0.967986 19.9555 0.847316 19.9935 0.722695 19.9992C0.598075 20.005 0.474171 19.9782 0.36418 19.9218C0.25419 19.8653 0.162231 19.7814 0.0980994 19.6788C0.0339676 19.5763 6.44497e-05 19.459 0 19.3395V0.660533C6.44497e-05 0.540991 0.0339676 0.423705 0.0980994 0.321165C0.162231 0.218626 0.25419 0.134673 0.36418 0.0782491C0.474171 0.0218253 0.598075 -0.00495703 0.722695 0.000755024C0.847316 0.00646708 0.967986 0.0444598 1.07185 0.110686L15.6929 9.45015C15.7874 9.51051 15.8648 9.59227 15.9184 9.68819C15.972 9.78411 16 9.89121 16 10C16 10.1088 15.972 10.2159 15.9184 10.3118C15.8648 10.4077 15.7874 10.4895 15.6929 10.5498V10.5498Z"\n' +
                            '                                                          fill="black">\n' +
                            '                                            </span>\n' +
                            '                                        </a>\n' +
                            '                                        <button class="btn transparent_white">\n' +
                            '                                            <span class="nuxt-icon nuxt-icon--fill button-square__icon">\n' +
                            '                                                <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n' +
                            '                                                    <path fill-rule="evenodd" clip-rule="evenodd"\n' +
                            '                                                          d="M9.0012 2.08845C11.1054 -0.53572 14.6045 -0.367386 16.427 1.20678C18.3629 2.87761 18.4962 6.21845 16.567 9.55595C15.292 11.9109 12.0395 14.2876 9.31287 15.8576C9.12037 15.9684 8.88203 15.9684 8.68953 15.8576C5.96453 14.2884 2.71453 11.9143 1.4412 9.56595C-0.4938 6.22178 -0.3613 2.87845 1.57537 1.20678C3.39787 -0.367386 6.89703 -0.53572 9.0012 2.08845ZM8.46037 3.50761C6.9412 0.883447 3.9112 0.840113 2.39203 2.15261C1.6462 2.79678 1.29287 3.77178 1.29287 4.89928C1.29287 6.13095 1.70953 7.53511 2.52453 8.94178C2.52787 8.94761 2.53037 8.95261 2.5337 8.95845C3.6687 11.0584 6.53203 13.1384 9.0012 14.5926C11.4704 13.1384 14.3337 11.0584 15.4687 8.95845C15.472 8.95261 15.4745 8.94761 15.4779 8.94178C16.2929 7.53511 16.7095 6.13095 16.7095 4.89928C16.7095 3.77178 16.3562 2.79678 15.6104 2.15261C14.0912 0.840113 11.0612 0.883447 9.54203 3.50761C9.43037 3.70095 9.22453 3.82011 9.0012 3.82011C8.77787 3.82011 8.57203 3.70095 8.46037 3.50761Z"\n' +
                            '                                                          fill="white">\n' +
                            '                                                    </path>\n' +
                            '                                                </svg>\n' +
                            '                                            </span>\n' +
                            '                                        </button>\n' +
                            '                                    </div>\n' +
                            '                                </div>\n' +
                            '                            </div>\n' +
                            '                        </div>' +
                            '</div>';
                    });
                    $('.frame_items').empty().append(responseData);
                }
            }

            console.log('Catalog page is ready');
        });
    </script>
</body>
</html>